<!doctype html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="chrome=1"><title>templar by synapticloop</title><link rel="stylesheet" href="stylesheets/styles.css"><link rel="stylesheet" href="stylesheets/pygment_trac.css"><link rel="stylesheet" href="stylesheets/prettify.css" type="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><script src="javascripts/prettify.js" type="text/javascript" ></script></head><body><div class="wrapper"><header><h1>templar</h1><p>An ultra light-weight templating engine (~90kb at the time of writing)</p><hr /><h2>Navigation</h2><p>&raquo; <a href="index.html">Home</a><br />&raquo; <a href="quick-start.html">Quick Start</a><br />&mdash;&raquo; <a href="syntax-reference.html">Syntax Reference</a><br />&mdash;&raquo; <a href="function-reference.html">Function Reference</a><br /></p><hr /><p class="view"><a href="https://github.com/synapticloop/templar">View the Project on GitHub <br /><small>synapticloop/templar</small></a></p><p class="view"><a href="https://github.com/synapticloop/templar/releases">Download a release from GitHub <br /><small>synapticloop/templar/releases</small></a></p><ul><li><a href="https://github.com/synapticloop/templar/zipball/master">Download <strong>ZIP File</strong></a></li><li><a href="https://github.com/synapticloop/templar/tarball/master">Download <strong>TAR Ball</strong></a></li><li><a href="https://github.com/synapticloop/templar">View On <strong>GitHub</strong></a></li></ul><p>This project is maintained by <a href="https://github.com/synapticloop">synapticloop</a> and these pages were generated with <a href="https://github.com/synapticloop/templar-gen/">synapticloop templar-gen</a></p></header><section><h3><a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>function reference.</h3><p>Functions are helpers that can be placed in:</p><ul><li>evaluations</li><li>set commands</li><li>loop commands</li><li>if commands</li></ul><p>And can be arbitrarily nested</p><p>The list of available commands are as follows - which can be output by <code>{dumpfunctions}</code></p><pre><code>FunctionLessThanEqual #numArgs: 2
FunctionNotEqual #numArgs: 2
FunctionLessThan #numArgs: 2
FunctionAnd #numArgs: 2
FunctionGreaterThanEqual #numArgs: 2
FunctionLessThanEqual #numArgs: 2
FunctionPower #numArgs: 2
FunctionOr #numArgs: 2
FunctionIsNotNull #numArgs: 1
FunctionFormatDate #numArgs: 0
FunctionModulus #numArgs: 2
FunctionAnd #numArgs: 2
FunctionLength #numArgs: 1
FunctionFalse #numArgs: 1
FunctionNotEqual #numArgs: 2
FunctionMultiply #numArgs: 2
FunctionAdd #numArgs: 2
FunctionIsNotNull #numArgs: 1
FunctionGreaterThan #numArgs: 2
FunctionSubtract #numArgs: 2
FunctionOdd #numArgs: 1
FunctionDivide #numArgs: 2
FunctionEqual #numArgs: 2
FunctionIsNull #numArgs: 1
FunctionSize #numArgs: 1
FunctionEven #numArgs: 1
FunctionTrue #numArgs: 1
FunctionNotEqual #numArgs: 2
FunctionNotEqual #numArgs: 2
FunctionLessThan #numArgs: 2
FunctionOr #numArgs: 2
FunctionEqual #numArgs: 2
FunctionIsNotNull #numArgs: 1
FunctionGreaterThan #numArgs: 2
FunctionGreaterThanEqual #numArgs: 2
</code></pre><p><strong>Creating your own function</strong></p><p>The functions should be fairly explanatory from the above list.  However you may wish to add your own function, the example shown here is taken from <a href="https://github.com/synapticloop/h2zero/">h2zero</a> <a href="https://github.com/synapticloop/h2zero/blob/master/src/main/java/synapticloop/h2zero/templar/function/FunctionRequiresImport.java">FunctionRequiresImport.java</a>.(with a lot more comments than are in the source)</p><pre class="prettyprint lang-java"><code>package synapticloop.h2zero.templar.function;

import synapticloop.h2zero.model.BaseSchemaObject;
import synapticloop.templar.exception.FunctionException;
import synapticloop.templar.function.Function;
import synapticloop.templar.utils.ObjectUtils;
import synapticloop.templar.utils.TemplarContext;

public class FunctionRequiresImport extends Function {
	public static final String FUNCTION_NAME = "requiresImport";

	public FunctionRequiresImport() {
		// here we register the fixed number of arguments that are required
		super(2);
	}

	@Override
	public Object evaluate(Object[] args, TemplarContext templarContext) throws FunctionException {
		if(verifyArgumentLength(args)) {
			// do we have the correct number of arguments passed through?
			Object tableObject = null;
			if(args[0] instanceof BaseSchemaObject) {
				tableObject = args[0];
			} else {
				// the evaluateObjectToDefault should be the call that is used, this will de-quote any strings
				// and return them, or else it will look up the expression in the templarContext
				tableObject = ObjectUtils.evaluateObjectToDefault(args[0].toString(), templarContext);
			}

			Object fieldTypeObject = ObjectUtils.evaluateObjectToDefault(args[1], templarContext);

			if(tableObject instanceof BaseSchemaObject && fieldTypeObject instanceof String) {
				BaseSchemaObject baseSchemaObject = (BaseSchemaObject)tableObject;
				String fieldType = (String)fieldTypeObject;

				// here we are returning a boolean object for use in an {if fn:requiresImport[__class__, __import_package_name__]}
				// which if true, will then output everything up until the {else} or {endif} tokens

				return(baseSchemaObject.requiresImport(fieldType));
			} else {
				throw new FunctionException("The function '" + FUNCTION_NAME + "' takes exactly two arguments, which must be of type ['" + BaseSchemaObject.class.getCanonicalName() + "', '" + String.class.getCanonicalName() + "'], found arguments of ['" + tableObject.getClass().getCanonicalName() + "', '" + fieldTypeObject.getClass().getCanonicalName() + "']." );
			}
		} else {
			// at this point - we did not have the correct number of arguments
			throw new FunctionException("The function '" + FUNCTION_NAME + "' takes exactly 2 arguments.");
		}
	}

}
</code></pre><p>Once you have written your own function, you then need to add it to the templarContext for it to be callable</p><pre class="prettyprint lang-java"><code>TemplarConfiguration templarConfiguration = new TemplarConfiguration();
templarConfiguration.setExplicitNewLines(true);
templarConfiguration.setExplicitTabs(true);

TemplarContext templarContext = new TemplarContext(templarConfiguration);

if(!templarContext.hasFunction("requiresImport")) {
	templarContext.addFunction("requiresImport", new FunctionRequiresImport());
}
</code></pre></section><script type="text/javascript">
	var _paq = _paq || [];
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
		var u="//piwik.synapticloop.com/";
		_paq.push(['setTrackerUrl', u+'piwik.php']);
		_paq.push(['setSiteId', 13]);
		var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
	})();
</script>
<noscript><p><img src="//piwik.synapticloop.com/piwik.php?idsite=13" style="border:0;" alt="" /></p></noscript>
</div><script src="javascripts/scale.fix.js"></script></body></html>